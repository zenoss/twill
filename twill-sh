#! /usr/bin/env python2.4
"""
twill shell.
"""

import sys
from twill import TwillCommandLoop, execute_file

# If run from the command line, find & run any scripts put on the command
# line.  If none, drop into an interactive AutoShell.

if __name__ == '__main__':
    if len(sys.argv[1:]):
        success = []
        failure = []
        for filename in sys.argv[1:]:
            print '>> EXECUTING FILE', filename

            try:
                execute_file(filename)
                success.append(filename)
            except:
                failure.append(filename)
		raise

        print '--'
        print '%d of %d files SUCCEEDED.' % (len(success), len(sys.argv) - 1)
        if len(failure):
            print 'Failed:\n\t',
            print "\n\t".join(failure)
                                                
    else:
	TwillCommandLoop().cmdloop("\n Welcome to twill!\n")
